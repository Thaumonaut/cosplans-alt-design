import{D as re,r as tr,w as et}from"./chunks/vendor-ui.js";import{json as G,text as U,error as je}from"@sveltejs/kit";import{HttpError as ae,SvelteKitError as L,Redirect as V,ActionFailure as Ee}from"@sveltejs/kit/internal";import{with_request_store as N,merge_tracing as ce}from"@sveltejs/kit/internal/server";import{a as J,b as z,c as oe,r as rr,o as sr,d as tt}from"./chunks/environment.js";import{i as we,g as Te,D as Re,a as nr,e as ar,s as or,b as de,c as ir,d as $e,f as cr,p as ge,h as ue,T as rt,I as st}from"./chunks/shared.js";import{m as lr,d as kt,a as vt,v as ur,b as dr,c as fr,e as pr,n as Fe,r as nt,f as hr}from"./chunks/exports.js";import{b as at,t as _r,a as _e,g as mr}from"./chunks/utils.js";import{p as De,r as ot,o as yr,s as wr,a as gr,g as br,b as $r}from"./chunks/internal.js";function xt(){let e,t;return{promise:new Promise((s,n)=>{e=s,t=n}),resolve:e,reject:t}}const kr=[101,103,204,205,304],vr=!!globalThis.process?.versions?.webcontainer,xr="/_svelte_kit_assets",Et=["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],Er=["GET","POST","HEAD"];function Be(e,t){const r=[];e.split(",").forEach((o,a)=>{const l=/([^/ \t]+)\/([^; \t]+)[ \t]*(?:;[ \t]*q=([0-9.]+))?/.exec(o);if(l){const[,i,c,u="1"]=l;r.push({type:i,subtype:c,q:+u,i:a})}}),r.sort((o,a)=>o.q!==a.q?a.q-o.q:o.subtype==="*"!=(a.subtype==="*")?o.subtype==="*"?1:-1:o.type==="*"!=(a.type==="*")?o.type==="*"?1:-1:o.i-a.i);let s,n=1/0;for(const o of t){const[a,l]=o.split("/"),i=r.findIndex(c=>(c.type===a||c.type==="*")&&(c.subtype===l||c.subtype==="*"));i!==-1&&i<n&&(s=o,n=i)}return s}function Ar(e,...t){const r=e.headers.get("content-type")?.split(";",1)[0].trim()??"";return t.includes(r.toLowerCase())}function Ve(e){return Ar(e,"application/x-www-form-urlencoded","multipart/form-data","text/plain")}function Sr(e){return e instanceof Error||e&&e.name&&e.message?e:new Error(JSON.stringify(e))}function ie(e){return e instanceof ae||e instanceof L?e.status:500}function jr(e){return e instanceof L?e.text:"Internal Error"}const At={"&":"&amp;",'"':"&quot;"},St={"&":"&amp;","<":"&lt;"},jt="[\\ud800-\\udbff](?![\\udc00-\\udfff])|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\udc00-\\udfff]",Tr=new RegExp(`[${Object.keys(At).join("")}]|`+jt,"g"),Rr=new RegExp(`[${Object.keys(St).join("")}]|`+jt,"g");function Ge(e,t){const r=t?At:St;return e.replace(t?Tr:Rr,n=>n.length===2?n:r[n]??`&#${n.charCodeAt(0)};`)}function Tt(e,t){return U(`${t} method not allowed`,{status:405,headers:{allow:Or(e).join(", ")}})}function Or(e){const t=Et.filter(r=>r in e);return"GET"in e&&!("HEAD"in e)&&t.push("HEAD"),t}function Rt(e){return`__sveltekit_${e.version_hash}`}function ke(e,t,r){let s=e.templates.error({status:t,message:Ge(r)});return U(s,{headers:{"content-type":"text/html; charset=utf-8"},status:t})}async function it(e,t,r,s){s=s instanceof ae?s:Sr(s);const n=ie(s),o=await I(e,t,r,s),a=Be(e.request.headers.get("accept")||"text/html",["application/json","text/html"]);return e.isDataRequest||a==="application/json"?G(o,{status:n}):ke(r,n,o.message)}async function I(e,t,r,s){if(s instanceof ae)return{message:"Unknown Error",...s.body};const n=ie(s),o=jr(s);return await N({event:e,state:t},()=>r.hooks.handleError({error:s,event:e,status:n,message:o}))??{message:o}}function ve(e,t){return new Response(void 0,{status:e,headers:{location:t}})}function Ot(e,t){return t.path?`Data returned from \`load\` while rendering ${e.route.id} is not serializable: ${t.message} (${t.path}). If you need to serialize/deserialize custom types, use transport hooks: https://svelte.dev/docs/kit/hooks#Universal-hooks-transport.`:t.path===""?`Data returned from \`load\` while rendering ${e.route.id} is not a plain object`:t.message}function Pt(e){const t={};return e.uses&&e.uses.dependencies.size>0&&(t.dependencies=Array.from(e.uses.dependencies)),e.uses&&e.uses.search_params.size>0&&(t.search_params=Array.from(e.uses.search_params)),e.uses&&e.uses.params.size>0&&(t.params=Array.from(e.uses.params)),e.uses?.parent&&(t.parent=1),e.uses?.route&&(t.route=1),e.uses?.url&&(t.url=1),t}function Ct(e,t){return e._.prerendered_routes.has(t)||t.at(-1)==="/"&&e._.prerendered_routes.has(t.slice(0,-1))}function Pr(e,t,r){const s=`
\x1B[1;31m[${e}] ${r.request.method} ${r.url.pathname}\x1B[0m`;return e===404?s:`${s}
${t.stack}`}function qt(e){const r=e?.split("/")?.at(-1);return r?r.split(".").slice(0,-1).join("."):"unknown"}async function Cr(e,t,r,s){const n=e.request.method;let o=r[n]||r.fallback;if(n==="HEAD"&&!r.HEAD&&r.GET&&(o=r.GET),!o)return Tt(r,n);const a=r.prerender??s.prerender_default;if(a&&(r.POST||r.PATCH||r.PUT||r.DELETE))throw new Error("Cannot prerender endpoints that have mutative methods");if(s.prerendering&&!s.prerendering.inside_reroute&&!a){if(s.depth>0)throw new Error(`${e.route.id} is not prerenderable`);return new Response(void 0,{status:204})}t.is_endpoint_request=!0;try{const l=await N({event:e,state:t},()=>o(e));if(!(l instanceof Response))throw new Error(`Invalid response from route ${e.url.pathname}: handler should return a Response object`);if(s.prerendering&&(!s.prerendering.inside_reroute||a)){const i=new Response(l.clone().body,{status:l.status,statusText:l.statusText,headers:new Headers(l.headers)});if(i.headers.set("x-sveltekit-prerender",String(a)),s.prerendering.inside_reroute&&a)i.headers.set("x-sveltekit-routeid",encodeURI(e.route.id)),s.prerendering.dependencies.set(e.url.pathname,{response:i,body:null});else return i}return l}catch(l){if(l instanceof V)return new Response(void 0,{status:l.status,headers:{location:l.location}});throw l}}function qr(e){const{method:t,headers:r}=e.request;if(Et.includes(t)&&!Er.includes(t))return!0;if(t==="POST"&&r.get("x-sveltekit-action")==="true")return!1;const s=e.request.headers.get("accept")??"*/*";return Be(s,["*","text/html"])!=="text/html"}function Le(e){return e.filter(t=>t!=null)}const Je="/__data.json",xe=".html__data.json";function Ur(e){return e.endsWith(Je)||e.endsWith(xe)}function Ze(e){return e.endsWith(".html")?e.replace(/\.html$/,xe):e.replace(/\/$/,"")+Je}function zr(e){return e.endsWith(xe)?e.slice(0,-xe.length)+".html":e.slice(0,-Je.length)}const Xe="/__route.js";function Nr(e){return e.endsWith(Xe)}function Ut(e){return e.replace(/\/$/,"")+Xe}function Dr(e){return e.slice(0,-Xe.length)}const Oe="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",Lr=/[<\b\f\n\r\t\0\u2028\u2029]/g,Ir=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/;function M(e,t){const r=new Map,s=[],n=new Map;function o(c){if(typeof c=="function")throw new Re("Cannot stringify a function",s);if(!we(c)){if(r.has(c)){r.set(c,r.get(c)+1);return}if(r.set(c,1),t){const d=t(c,m=>M(m,t));if(typeof d=="string"){n.set(c,d);return}}switch(Te(c)){case"Number":case"BigInt":case"String":case"Boolean":case"Date":case"RegExp":case"URL":case"URLSearchParams":return;case"Array":c.forEach((d,m)=>{s.push(`[${m}]`),o(d),s.pop()});break;case"Set":Array.from(c).forEach(o);break;case"Map":for(const[d,m]of c)s.push(`.get(${we(d)?Pe(d):"..."})`),o(m),s.pop();break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":o(c.buffer);return;case"ArrayBuffer":return;case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":return;default:if(!nr(c))throw new Re("Cannot stringify arbitrary non-POJOs",s);if(ar(c).length>0)throw new Re("Cannot stringify POJOs with symbolic keys",s);for(const d in c)s.push(or(d)),o(c[d]),s.pop()}}}o(e);const a=new Map;Array.from(r).filter(c=>c[1]>1).sort((c,u)=>u[1]-c[1]).forEach((c,u)=>{a.set(c[0],Hr(u))});function l(c){if(a.has(c))return a.get(c);if(we(c))return Pe(c);if(n.has(c))return n.get(c);const u=Te(c);switch(u){case"Number":case"String":case"Boolean":return`Object(${l(c.valueOf())})`;case"RegExp":return`new RegExp(${de(c.source)}, "${c.flags}")`;case"Date":return`new Date(${c.getTime()})`;case"URL":return`new URL(${de(c.toString())})`;case"URLSearchParams":return`new URLSearchParams(${de(c.toString())})`;case"Array":const d=c.map((_,y)=>y in c?l(_):""),m=c.length===0||c.length-1 in c?"":",";return`[${d.join(",")}${m}]`;case"Set":case"Map":return`new ${u}([${Array.from(c).map(l).join(",")}])`;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{let _=`new ${u}`;if(r.get(c.buffer)===1){const E=new c.constructor(c.buffer);_+=`([${E}])`}else _+=`([${l(c.buffer)}])`;const y=c.byteOffset,$=y+c.byteLength;if(y>0||$!==c.buffer.byteLength){const E=+/(\d+)/.exec(u)[1]/8;_+=`.subarray(${y/E},${$/E})`}return _}case"ArrayBuffer":return`new Uint8Array([${new Uint8Array(c).toString()}]).buffer`;case"Temporal.Duration":case"Temporal.Instant":case"Temporal.PlainDate":case"Temporal.PlainTime":case"Temporal.PlainDateTime":case"Temporal.PlainMonthDay":case"Temporal.PlainYearMonth":case"Temporal.ZonedDateTime":return`${u}.from(${de(c.toString())})`;default:const f=Object.keys(c),p=f.map(_=>`${Wr(_)}:${l(c[_])}`).join(",");return Object.getPrototypeOf(c)===null?f.length>0?`{${p},__proto__:null}`:"{__proto__:null}":`{${p}}`}}const i=l(e);if(a.size){const c=[],u=[],d=[];return a.forEach((m,f)=>{if(c.push(m),n.has(f)){d.push(n.get(f));return}if(we(f)){d.push(Pe(f));return}switch(Te(f)){case"Number":case"String":case"Boolean":d.push(`Object(${l(f.valueOf())})`);break;case"RegExp":d.push(f.toString());break;case"Date":d.push(`new Date(${f.getTime()})`);break;case"Array":d.push(`Array(${f.length})`),f.forEach((h,_)=>{u.push(`${m}[${_}]=${l(h)}`)});break;case"Set":d.push("new Set"),u.push(`${m}.${Array.from(f).map(h=>`add(${l(h)})`).join(".")}`);break;case"Map":d.push("new Map"),u.push(`${m}.${Array.from(f).map(([h,_])=>`set(${l(h)}, ${l(_)})`).join(".")}`);break;case"ArrayBuffer":d.push(`new Uint8Array([${new Uint8Array(f).join(",")}]).buffer`);break;default:d.push(Object.getPrototypeOf(f)===null?"Object.create(null)":"{}"),Object.keys(f).forEach(h=>{u.push(`${m}${Fr(h)}=${l(f[h])}`)})}}),u.push(`return ${i}`),`(function(${c.join(",")}){${u.join(";")}}(${d.join(",")}))`}else return i}function Hr(e){let t="";do t=Oe[e%Oe.length]+t,e=~~(e/Oe.length)-1;while(e>=0);return Ir.test(t)?`${t}0`:t}function Mr(e){return ir[e]||e}function zt(e){return e.replace(Lr,Mr)}function Wr(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:zt(JSON.stringify(e))}function Fr(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${zt(JSON.stringify(e))}]`}function Pe(e){if(typeof e=="string")return de(e);if(e===void 0)return"void 0";if(e===0&&1/e<0)return"-0";const t=String(e);return typeof e=="number"?t.replace(/^(-)?0\./,"$1."):typeof e=="bigint"?e+"n":t}const Br={spanContext(){return Vr},setAttribute(){return this},setAttributes(){return this},addEvent(){return this},setStatus(){return this},updateName(){return this},end(){return this},isRecording(){return!1},recordException(){return this},addLink(){return this},addLinks(){return this}},Vr={traceId:"",spanId:"",traceFlags:0};async function ee({name:e,attributes:t,fn:r}){return r(Br)}function Nt(e){return Be(e.request.headers.get("accept")??"*/*",["application/json","text/html"])==="application/json"&&e.request.method==="POST"}async function Gr(e,t,r,s){const n=s?.actions;if(!n){const o=new L(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page");return fe({type:"error",error:await I(e,t,r,o)},{status:o.status,headers:{allow:"GET"}})}Lt(n);try{const o=await It(e,t,n);return o instanceof Ee?fe({type:"failure",status:o.status,data:ct(o.data,e.route.id,r.hooks.transport)}):fe({type:"success",status:o?200:204,data:ct(o,e.route.id,r.hooks.transport)})}catch(o){const a=o;return a instanceof V?Dt(a):fe({type:"error",error:await I(e,t,r,Ke(a))},{status:ie(a)})}}function Ke(e){return e instanceof Ee?new Error('Cannot "throw fail()". Use "return fail()"'):e}function Dt(e){return fe({type:"redirect",status:e.status,location:e.location})}function fe(e,t){return G(e,t)}function Jr(e){return e.request.method==="POST"}async function Zr(e,t,r){const s=r?.actions;if(!s)return e.setHeaders({allow:"GET"}),{type:"error",error:new L(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};Lt(s);try{const n=await It(e,t,s);return n instanceof Ee?{type:"failure",status:n.status,data:n.data}:{type:"success",status:200,data:n}}catch(n){const o=n;return o instanceof V?{type:"redirect",status:o.status,location:o.location}:{type:"error",error:Ke(o)}}}function Lt(e){if(e.default&&Object.keys(e).length>1)throw new Error("When using named actions, the default action cannot be used. See the docs for more info: https://svelte.dev/docs/kit/form-actions#named-actions")}async function It(e,t,r){const s=new URL(e.request.url);let n="default";for(const a of s.searchParams)if(a[0].startsWith("/")){if(n=a[0].slice(1),n==="default")throw new Error('Cannot use reserved action name "default"');break}const o=r[n];if(!o)throw new L(404,"Not Found",`No action with name '${n}' found`);if(!Ve(e.request))throw new L(415,"Unsupported Media Type",`Form actions expect form-encoded data — received ${e.request.headers.get("content-type")}`);return ee({name:"sveltekit.form_action",attributes:{"http.route":e.route.id||"unknown"},fn:async a=>{const l=ce(e,a),i=await N({event:l,state:t},()=>o(l));return i instanceof Ee&&a.setAttributes({"sveltekit.form_action.result.type":"failure","sveltekit.form_action.result.status":i.status}),i}})}function Xr(e,t,r){const s=n=>{for(const o in r){const a=r[o].encode(n);if(a)return`app.decode('${o}', ${M(a,s)})`}};return Ht(e,n=>M(n,s),t)}function ct(e,t,r){const s=Object.fromEntries(Object.entries(r).map(([n,o])=>[n,o.encode]));return Ht(e,n=>$e(n,s),t)}function Ht(e,t,r){try{return t(e)}catch(s){const n=s;if(e instanceof Response)throw new Error(`Data returned from action inside ${r} is not serializable. Form actions need to return plain objects or fail(). E.g. return { success: true } or return fail(400, { message: "invalid" });`);if("path"in n){let o=`Data returned from action inside ${r} is not serializable: ${n.message}`;throw n.path!==""&&(o+=` (data.${n.path})`),new Error(o)}throw n}}function Mt(){let e=-1,t=-1;const r=[];return{iterate:(s=n=>n)=>({[Symbol.asyncIterator](){return{next:async()=>{const n=r[++t];if(!n)return{value:null,done:!0};const o=await n.promise;return{value:s(o),done:!1}}}}}),add:s=>{r.push(xt()),s.then(n=>{r[++e].resolve(n)})}}}function pe(e,t,r){let s=1,n=-1;const o=Mt(),a=Rt(r);function l(c){return function u(d){if(typeof d?.then=="function"){const m=s++,f=d.then(p=>({data:p})).catch(async p=>({error:await I(e,t,r,p)})).then(async({data:p,error:h})=>{let _;try{_=M(h?[,h]:[p],u)}catch{h=await I(e,t,r,new Error(`Failed to serialize promise while rendering ${e.route.id}`)),p=void 0,_=M([,h],u)}return{index:c,str:`${a}.resolve(${m}, ${_.includes("app.decode")?`(app) => ${_}`:`() => ${_}`})`}});return o.add(f),`${a}.defer(${m})`}else for(const m in r.hooks.transport){const f=r.hooks.transport[m].encode(d);if(f)return`app.decode('${m}', ${M(f,u)})`}}}const i=[];return{set_max_nodes(c){n=c},add_node(c,u){try{if(!u){i[c]="null";return}const d={type:"data",data:u.data,uses:Pt(u)};u.slash&&(d.slash=u.slash),i[c]=M(d,l(c))}catch(d){throw d.path=d.path.slice(1),new Error(Ot(e,d))}},get_data(c){const u=`<script${c.script_needs_nonce?` nonce="${c.nonce}"`:""}>`,d=`<\/script>
`;return{data:`[${Le(n>-1?i.slice(0,n):i).join(",")}]`,chunks:s>1?o.iterate(({index:m,str:f})=>n>-1&&m>=n?"":u+f+d):null}}}}function Wt(e,t,r){let s=1;const n=Mt(),o={...Object.fromEntries(Object.entries(r.hooks.transport).map(([l,i])=>[l,i.encode])),Promise:l=>{if(typeof l?.then!="function")return;const i=s++;let c="data";const u=l.catch(async d=>(c="error",I(e,t,r,d))).then(async d=>{let m;try{m=$e(d,o)}catch{const f=await I(e,t,r,new Error(`Failed to serialize promise while rendering ${e.route.id}`));c="error",m=$e(f,o)}return`{"type":"chunk","id":${i},"${c}":${m}}
`});return n.add(u),i}},a=[];return{add_node(l,i){try{if(!i){a[l]="null";return}if(i.type==="error"||i.type==="skip"){a[l]=JSON.stringify(i);return}a[l]=`{"type":"data","data":${$e(i.data,o)},"uses":${JSON.stringify(Pt(i))}${i.slash?`,"slash":${JSON.stringify(i.slash)}`:""}}`}catch(c){throw c.path="data"+c.path,new Error(Ot(e,c))}},get_data(){return{data:`{"type":"data","nodes":[${a.join(",")}]}
`,chunks:s>1?n.iterate():null}}}}async function Ye({event:e,event_state:t,state:r,node:s,parent:n}){if(!s?.server)return null;let o=!0;const a={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1,search_params:new Set},l=s.server.load,i=s.server.trailingSlash;if(!l)return{type:"data",data:null,uses:a,slash:i};const c=lr(e.url,()=>{o&&(a.url=!0)},d=>{o&&a.search_params.add(d)});return r.prerendering&&kt(c),{type:"data",data:await ee({name:"sveltekit.load",attributes:{"sveltekit.load.node_id":s.server_id||"unknown","sveltekit.load.node_type":qt(s.server_id),"http.route":e.route.id||"unknown"},fn:async d=>{const m=ce(e,d);return await N({event:m,state:t},()=>l.call(null,{...m,fetch:(p,h)=>(new URL(p instanceof Request?p.url:p,e.url),e.fetch(p,h)),depends:(...p)=>{for(const h of p){const{href:_}=new URL(h,e.url);a.dependencies.add(_)}},params:new Proxy(e.params,{get:(p,h)=>(o&&a.params.add(h),p[h])}),parent:async()=>(o&&(a.parent=!0),n()),route:new Proxy(e.route,{get:(p,h)=>(o&&(a.route=!0),p[h])}),url:c,untrack(p){o=!1;try{return p()}finally{o=!0}}}))}})??null,uses:a,slash:i}}async function Ft({event:e,event_state:t,fetched:r,node:s,parent:n,server_data_promise:o,state:a,resolve_opts:l,csr:i}){const c=await o,u=s?.universal?.load;return u?await ee({name:"sveltekit.load",attributes:{"sveltekit.load.node_id":s.universal_id||"unknown","sveltekit.load.node_type":qt(s.universal_id),"http.route":e.route.id||"unknown"},fn:async m=>{const f=ce(e,m);return await N({event:f,state:t},()=>u.call(null,{url:e.url,params:e.params,data:c?.data??null,route:e.route,fetch:Kr(e,a,r,i,l),setHeaders:e.setHeaders,depends:()=>{},parent:n,untrack:p=>p(),tracing:f.tracing}))}})??null:c?.data??null}function Kr(e,t,r,s,n){const o=async(a,l)=>{const i=a instanceof Request&&a.body?a.clone().body:null,c=a instanceof Request&&[...a.headers].length?new Headers(a.headers):l?.headers;let u=await e.fetch(a,l);const d=new URL(a instanceof Request?a.url:a,e.url),m=d.origin===e.url.origin;let f;if(m)t.prerendering&&(f={response:u,body:null},t.prerendering.dependencies.set(d.pathname,f));else if(d.protocol==="https:"||d.protocol==="http:")if((a instanceof Request?a.mode:l?.mode??"cors")==="no-cors")u=new Response("",{status:u.status,statusText:u.statusText,headers:u.headers});else{const y=u.headers.get("access-control-allow-origin");if(!y||y!==e.url.origin&&y!=="*")throw new Error(`CORS error: ${y?"Incorrect":"No"} 'Access-Control-Allow-Origin' header is present on the requested resource`)}let p;const h=new Proxy(u,{get(_,y,$){async function E(x,w){const g=Number(_.status);if(isNaN(g))throw new Error(`response.status is not a number. value: "${_.status}" type: ${typeof _.status}`);r.push({url:m?d.href.slice(e.url.origin.length):d.href,method:e.request.method,request_body:a instanceof Request&&i?await Yr(i):l?.body,request_headers:c,response_body:x,response:_,is_b64:w})}if(y==="body"){if(_.body===null)return null;if(p)return p;const[x,w]=_.body.tee();return(async()=>{let g=new Uint8Array;for await(const b of x){const k=new Uint8Array(g.length+b.length);k.set(g,0),k.set(b,g.length),g=k}f&&(f.body=new Uint8Array(g)),E(at(g),!0)})(),p=w}if(y==="arrayBuffer")return async()=>{const x=await _.arrayBuffer(),w=new Uint8Array(x);return f&&(f.body=w),x instanceof ArrayBuffer&&await E(at(w),!0),x};async function v(){const x=await _.text();if(x===""&&kr.includes(_.status)){await E(void 0,!1);return}return(!x||typeof x=="string")&&await E(x,!1),f&&(f.body=x),x}return y==="text"?v:y==="json"?async()=>{const x=await v();return x?JSON.parse(x):void 0}:Reflect.get(_,y,_)}});if(s){const _=u.headers.get;u.headers.get=y=>{const $=y.toLowerCase(),E=_.call(u.headers,$);if(E&&!$.startsWith("x-sveltekit-")&&!n.filterSerializedResponseHeaders($,E))throw new Error(`Failed to get response header "${$}" — it must be included by the \`filterSerializedResponseHeaders\` option: https://svelte.dev/docs/kit/hooks#Server-hooks-handle (at ${e.route.id})`);return E}}return h};return(a,l)=>{const i=o(a,l);return i.catch(()=>{}),i}}async function Yr(e){let t="";const r=e.getReader();for(;;){const{done:s,value:n}=await r.read();if(s)break;t+=_r.decode(n)}return t}function Bt(...e){let t=5381;for(const r of e)if(typeof r=="string"){let s=r.length;for(;s;)t=t*33^r.charCodeAt(--s)}else if(ArrayBuffer.isView(r)){const s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);let n=s.length;for(;n;)t=t*33^s[--n]}else throw new TypeError("value must be a string or TypedArray");return(t>>>0).toString(36)}const Vt={"<":"\\u003C","\u2028":"\\u2028","\u2029":"\\u2029"},Qr=new RegExp(`[${Object.keys(Vt).join("")}]`,"g");function es(e,t,r=!1){const s={};let n=null,o=null,a=!1;for(const[u,d]of e.response.headers)t(u,d)&&(s[u]=d),u==="cache-control"?n=d:u==="age"?o=d:u==="vary"&&d.trim()==="*"&&(a=!0);const l={status:e.response.status,statusText:e.response.statusText,headers:s,body:e.response_body},i=JSON.stringify(l).replace(Qr,u=>Vt[u]),c=['type="application/json"',"data-sveltekit-fetched",`data-url="${Ge(e.url,!0)}"`];if(e.is_b64&&c.push("data-b64"),e.request_headers||e.request_body){const u=[];e.request_headers&&u.push([...new Headers(e.request_headers)].join(",")),e.request_body&&u.push(e.request_body),c.push(`data-hash="${Bt(...u)}"`)}if(!r&&e.method==="GET"&&n&&!a){const u=/s-maxage=(\d+)/g.exec(n)??/max-age=(\d+)/g.exec(n);if(u){const d=+u[1]-+(o??"0");c.push(`data-ttl="${d}"`)}}return`<script ${c.join(" ")}>${i}<\/script>`}const D=JSON.stringify;function lt(e){Ie[0]||ts();const t=Gt.slice(0),r=rs(e);for(let n=0;n<r.length;n+=16){const o=r.subarray(n,n+16);let a,l,i,c=t[0],u=t[1],d=t[2],m=t[3],f=t[4],p=t[5],h=t[6],_=t[7];for(let y=0;y<64;y++)y<16?a=o[y]:(l=o[y+1&15],i=o[y+14&15],a=o[y&15]=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(i>>>17^i>>>19^i>>>10^i<<15^i<<13)+o[y&15]+o[y+9&15]|0),a=a+_+(f>>>6^f>>>11^f>>>25^f<<26^f<<21^f<<7)+(h^f&(p^h))+Ie[y],_=h,h=p,p=f,f=m+a|0,m=d,d=u,u=c,c=a+(u&d^m&(u^d))+(u>>>2^u>>>13^u>>>22^u<<30^u<<19^u<<10)|0;t[0]=t[0]+c|0,t[1]=t[1]+u|0,t[2]=t[2]+d|0,t[3]=t[3]+m|0,t[4]=t[4]+f|0,t[5]=t[5]+p|0,t[6]=t[6]+h|0,t[7]=t[7]+_|0}const s=new Uint8Array(t.buffer);return Jt(s),btoa(String.fromCharCode(...s))}const Gt=new Uint32Array(8),Ie=new Uint32Array(64);function ts(){function e(r){return(r-Math.floor(r))*4294967296}let t=2;for(let r=0;r<64;t++){let s=!0;for(let n=2;n*n<=t;n++)if(t%n===0){s=!1;break}s&&(r<8&&(Gt[r]=e(t**(1/2))),Ie[r]=e(t**(1/3)),r++)}}function Jt(e){for(let t=0;t<e.length;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function rs(e){const t=_e.encode(e),r=t.length*8,s=512*Math.ceil((r+65)/512),n=new Uint8Array(s/8);n.set(t),n[t.length]=128,Jt(n);const o=new Uint32Array(n.buffer);return o[o.length-2]=Math.floor(r/4294967296),o[o.length-1]=r,o}const ut=new Uint8Array(16);function ss(){return crypto.getRandomValues(ut),btoa(String.fromCharCode(...ut))}const ns=new Set(["self","unsafe-eval","unsafe-hashes","unsafe-inline","none","strict-dynamic","report-sample","wasm-unsafe-eval","script"]),as=/^(nonce|sha\d\d\d)-/;class Zt{#e;#t;#c;#l;#u;#d;#f;#p;#s;#n;#a;#o;#i;#r;#h;constructor(t,r,s){this.#e=t,this.#s=r;const n=this.#s;this.#n=[],this.#a=[],this.#o=[],this.#i=[],this.#r=[];const o=n["script-src"]||n["default-src"],a=n["script-src-elem"],l=n["style-src"]||n["default-src"],i=n["style-src-attr"],c=n["style-src-elem"],u=d=>!!d&&!d.some(m=>m==="unsafe-inline");this.#c=u(o),this.#l=u(a),this.#d=u(l),this.#f=u(i),this.#p=u(c),this.#t=this.#c||this.#l,this.#u=this.#d||this.#f||this.#p,this.script_needs_nonce=this.#t&&!this.#e,this.style_needs_nonce=this.#u&&!this.#e,this.#h=s}add_script(t){if(!this.#t)return;const r=this.#e?`sha256-${lt(t)}`:`nonce-${this.#h}`;this.#c&&this.#n.push(r),this.#l&&this.#a.push(r)}add_style(t){if(!this.#u)return;const r=this.#e?`sha256-${lt(t)}`:`nonce-${this.#h}`;if(this.#d&&this.#o.push(r),this.#f&&this.#i.push(r),this.#p){const s="sha256-9OlNO0DNEeaVzHL4RZwCLsBHA8WBQ8toBp/4F5XV2nc=",n=this.#s;n["style-src-elem"]&&!n["style-src-elem"].includes(s)&&!this.#r.includes(s)&&this.#r.push(s),r!==s&&this.#r.push(r)}}get_header(t=!1){const r=[],s={...this.#s};this.#o.length>0&&(s["style-src"]=[...s["style-src"]||s["default-src"]||[],...this.#o]),this.#i.length>0&&(s["style-src-attr"]=[...s["style-src-attr"]||[],...this.#i]),this.#r.length>0&&(s["style-src-elem"]=[...s["style-src-elem"]||[],...this.#r]),this.#n.length>0&&(s["script-src"]=[...s["script-src"]||s["default-src"]||[],...this.#n]),this.#a.length>0&&(s["script-src-elem"]=[...s["script-src-elem"]||[],...this.#a]);for(const n in s){if(t&&(n==="frame-ancestors"||n==="report-uri"||n==="sandbox"))continue;const o=s[n];if(!o)continue;const a=[n];Array.isArray(o)&&o.forEach(l=>{ns.has(l)||as.test(l)?a.push(`'${l}'`):a.push(l)}),r.push(a.join(" "))}return r.join("; ")}}class os extends Zt{get_meta(){const t=this.get_header(!0);if(t)return`<meta http-equiv="content-security-policy" content="${Ge(t,!0)}">`}}class is extends Zt{constructor(t,r,s){if(super(t,r,s),Object.values(r).filter(n=>!!n).length>0){const n=r["report-to"]?.length??!1,o=r["report-uri"]?.length??!1;if(!n&&!o)throw Error("`content-security-policy-report-only` must be specified with either the `report-to` or `report-uri` directives, or both")}}}class cs{nonce=ss();csp_provider;report_only_provider;constructor({mode:t,directives:r,reportOnly:s},{prerender:n}){const o=t==="hash"||t==="auto"&&n;this.csp_provider=new os(o,r,this.nonce),this.report_only_provider=new is(o,s,this.nonce)}get script_needs_nonce(){return this.csp_provider.script_needs_nonce||this.report_only_provider.script_needs_nonce}get style_needs_nonce(){return this.csp_provider.style_needs_nonce||this.report_only_provider.style_needs_nonce}add_script(t){this.csp_provider.add_script(t),this.report_only_provider.add_script(t)}add_style(t){this.csp_provider.add_style(t),this.report_only_provider.add_style(t)}}function Xt(e,t,r){const s={},n=e.slice(1),o=n.filter(l=>l!==void 0);let a=0;for(let l=0;l<t.length;l+=1){const i=t[l];let c=n[l-a];if(i.chained&&i.rest&&a&&(c=n.slice(l-a,l+1).filter(u=>u).join("/"),a=0),c===void 0){i.rest&&(s[i.name]="");continue}if(!i.matcher||r[i.matcher](c)){s[i.name]=c;const u=t[l+1],d=n[l+1];u&&!u.rest&&u.optional&&d&&i.chained&&(a=0),!u&&!d&&Object.keys(s).length===o.length&&(a=0);continue}if(i.optional&&i.chained){a++;continue}return}if(!a)return s}function Kt(e,t,r){const{errors:s,layouts:n,leaf:o}=e,a=[...s,...n.map(l=>l?.[1]),o[1]].filter(l=>typeof l=="number").map(l=>`'${l}': () => ${Yt(r._.client.nodes?.[l],t)}`).join(`,
		`);return[`{
	id: ${D(e.id)}`,`errors: ${D(e.errors)}`,`layouts: ${D(e.layouts)}`,`leaf: ${D(e.leaf)}`,`nodes: {
		${a}
	}
}`].join(`,
	`)}function Yt(e,t){if(!e)return"Promise.resolve({})";if(e[0]==="/")return`import('${e}')`;if(J!=="")return`import('${J}/${e}')`;let r=mr(t.pathname,`${z}/${e}`);return r[0]!=="."&&(r=`./${r}`),`import('${r}')`}async function ls(e,t,r){if(!r._.client.routes)return U("Server-side route resolution disabled",{status:400});let s=null,n={};const o=await r._.matchers();for(const a of r._.client.routes){const l=a.pattern.exec(e);if(!l)continue;const i=Xt(l,a.params,o);if(i){s=a,n=vt(i);break}}return Qt(s,n,t,r).response}function Qt(e,t,r,s){const n=new Headers({"content-type":"application/javascript; charset=utf-8"});if(e){const o=Kt(e,r,s),a=`${us(e,r,s)}
export const route = ${o}; export const params = ${JSON.stringify(t)};`;return{response:U(a,{headers:n}),body:a}}else return{response:U("",{headers:n}),body:""}}function us(e,t,r){const{errors:s,layouts:n,leaf:o}=e;let a="";for(const l of[...s,...n.map(i=>i?.[1]),o[1]]){if(typeof l!="number")continue;const i=r._.client.css?.[l];for(const c of i??[])a+=`'${J||z}/${c}',`}return a?`${Yt(r._.client.start,t)}.then(x => x.load_css([${a}]));`:""}const ds={...tr(!1),check:()=>!1};async function he({branch:e,fetched:t,options:r,manifest:s,state:n,page_config:o,status:a,error:l=null,event:i,event_state:c,resolve_opts:u,action_result:d,data_serializer:m}){if(n.prerendering){if(r.csp.mode==="nonce")throw new Error('Cannot use prerendering if config.kit.csp.mode === "nonce"');if(r.app_template_contains_nonce)throw new Error("Cannot use prerendering if page template contains %sveltekit.nonce%")}const{client:f}=s._,p=new Set(f.imports),h=new Set(f.stylesheets),_=new Set(f.fonts),y=new Set,$=new Set,E=new Map;let v;const x=d?.type==="success"||d?.type==="failure"?d.data??null:null;let w=z,g=J,b=D(z);if(n.prerendering?.fallback?r.hash_routing&&(b="new URL('.', location).pathname.slice(0, -1)"):(w=i.url.pathname.slice(z.length).split("/").slice(2).map(()=>"..").join("/")||".",b=`new URL(${D(w)}, location).pathname.slice(0, -1)`,(!J||J[0]==="/"&&J!==xr)&&(g=w)),o.ssr){const j={stores:{page:et(null),navigating:et(null),updated:ds},constructors:await Promise.all(e.map(({node:P})=>{if(!P.component)throw new Error(`Missing +page.svelte component for route ${i.route.id}`);return P.component()})),form:x};let R={};for(let P=0;P<e.length;P+=1)R={...R,...e[P].data},j[`data_${P}`]=R;j.page={error:l,params:i.params,route:i.route,status:a,url:i.url,data:R,form:x,state:{}};const B={context:new Map([["__request__",{page:j.page}]])},se=globalThis.fetch;try{v=await N({event:i,state:c},async()=>{rr&&sr({base:w,assets:g});const P=r.root.render(j,B),H=r.async&&"then"in P?P.then(O=>O):P;r.async&&tt();const{head:Y,html:me,css:ye}=r.async?await H:H;return{head:Y,html:me,css:ye}})}finally{tt()}for(const{node:P}of e){for(const H of P.imports)p.add(H);for(const H of P.stylesheets)h.add(H);for(const H of P.fonts)_.add(H);P.inline_styles&&!f.inline&&Object.entries(await P.inline_styles()).forEach(([H,Y])=>E.set(H,Y))}}else v={head:"",html:"",css:{code:"",map:null}};let k="",A=v.html;const S=new cs(r.csp,{prerender:!!n.prerendering}),T=j=>j.startsWith("/")?z+j:`${g}/${j}`,C=f.inline?f.inline?.style:Array.from(E.values()).join(`
`);if(C){const j=[];S.style_needs_nonce&&j.push(` nonce="${S.nonce}"`),S.add_style(C),k+=`
	<style${j.join("")}>${C}</style>`}for(const j of h){const R=T(j),B=['rel="stylesheet"'];E.has(j)?B.push("disabled",'media="(max-width: 0)"'):u.preload({type:"css",path:R})&&y.add(`<${encodeURI(R)}>; rel="preload"; as="style"; nopush`),k+=`
		<link href="${R}" ${B.join(" ")}>`}for(const j of _){const R=T(j);if(u.preload({type:"font",path:R})){const B=j.slice(j.lastIndexOf(".")+1);$.add(`<link rel="preload" as="font" type="font/${B}" href="${R}" crossorigin>`),y.add(`<${encodeURI(R)}>; rel="preload"; as="font"; type="font/${B}"; crossorigin; nopush`)}}const W=Rt(r),{data:F,chunks:Z}=m.get_data(S);if(o.ssr&&o.csr&&(A+=`
			${t.map(j=>es(j,u.filterSerializedResponseHeaders,!!n.prerendering)).join(`
			`)}`),o.csr){const j=s._.client.routes?.find(O=>O.id===i.route.id)??null;if(f.uses_env_dynamic_public&&n.prerendering&&p.add(`${oe}/env.js`),!f.inline){const O=Array.from(p,q=>T(q)).filter(q=>u.preload({type:"js",path:q}));for(const q of O)y.add(`<${encodeURI(q)}>; rel="modulepreload"; nopush`),r.preload_strategy!=="modulepreload"?k+=`
		<link rel="preload" as="script" crossorigin="anonymous" href="${q}">`:$.add(`<link rel="modulepreload" href="${q}">`)}if(n.prerendering&&$.size>0&&(k+=Array.from($).map(O=>`
		${O}`).join("")),s._.client.routes&&n.prerendering&&!n.prerendering.fallback){const O=Ut(i.url.pathname);n.prerendering.dependencies.set(O,Qt(j,i.params,new URL(O,i.url),s))}const R=[],B=f.uses_env_dynamic_public&&n.prerendering,se=[`base: ${b}`];if(J&&se.push(`assets: ${D(J)}`),f.uses_env_dynamic_public&&se.push(`env: ${B?"null":D(De)}`),Z){R.push("const deferred = new Map();"),se.push(`defer: (id) => new Promise((fulfil, reject) => {
							deferred.set(id, { fulfil, reject });
						})`);let O="";Object.keys(r.hooks.transport).length>0&&(f.inline?O=`const app = __sveltekit_${r.version_hash}.app.app;`:f.app?O=`const app = await import(${D(T(f.app))});`:O=`const { app } = await import(${D(T(f.start))});`);const q=O?`${O}
							const [data, error] = fn(app);`:"const [data, error] = fn();";se.push(`resolve: async (id, fn) => {
							${q}

							const try_to_resolve = () => {
								if (!deferred.has(id)) {
									setTimeout(try_to_resolve, 0);
									return;
								}
								const { fulfil, reject } = deferred.get(id);
								deferred.delete(id);
								if (error) reject(error);
								else fulfil(data);
							}
							try_to_resolve();
						}`)}R.push(`${W} = {
						${se.join(`,
						`)}
					};`);const P=["element"];if(R.push("const element = document.currentScript.parentElement;"),o.ssr){const O={form:"null",error:"null"};x&&(O.form=Xr(x,i.route.id,r.hooks.transport)),l&&(O.error=M(l));const q=[`node_ids: [${e.map(({node:K})=>K.index).join(", ")}]`,`data: ${F}`,`form: ${O.form}`,`error: ${O.error}`];if(a!==200&&q.push(`status: ${a}`),s._.client.routes){if(j){const K=Kt(j,i.url,s).replaceAll(`
`,`
							`);q.push(`params: ${M(i.params)}`,`server_route: ${K}`)}}else r.embedded&&q.push(`params: ${M(i.params)}`,`route: ${D(i.route)}`);const Q="	".repeat(B?7:6);P.push(`{
${Q}	${q.join(`,
${Q}	`)}
${Q}}`)}const{remote_data:H}=c;let Y="";if(H){const O={};for(const[Q,K]of H)if(Q.id)for(const le in K)O[cr(Q.id,le)]=await K[le];const q=Q=>{for(const K in r.hooks.transport){const le=r.hooks.transport[K].encode(Q);if(le)return`app.decode('${K}', ${M(le,q)})`}};Y=`${W}.data = ${M(O,q)};

						`}const me=f.inline?`${f.inline.script}

					${Y}${W}.app.start(${P.join(", ")});`:f.app?`Promise.all([
						import(${D(T(f.start))}),
						import(${D(T(f.app))})
					]).then(([kit, app]) => {
						${Y}kit.start(app, ${P.join(", ")});
					});`:`import(${D(T(f.start))}).then((app) => {
						${Y}app.start(${P.join(", ")})
					});`;if(B?R.push(`import(${D(`${w}/${oe}/env.js`)}).then(({ env }) => {
						${W}.env = env;

						${me.replace(/\n/g,`
	`)}
					});`):R.push(me),r.service_worker){let O="";if(r.service_worker_options!=null){const q={...r.service_worker_options};O=`, ${D(q)}`}R.push(`if ('serviceWorker' in navigator) {
						addEventListener('load', function () {
							navigator.serviceWorker.register('${T("service-worker.js")}'${O});
						});
					}`)}const ye=`
				{
					${R.join(`

					`)}
				}
			`;S.add_script(ye),A+=`
			<script${S.script_needs_nonce?` nonce="${S.nonce}"`:""}>${ye}<\/script>
		`}const X=new Headers({"x-sveltekit-page":"true","content-type":"text/html"});if(n.prerendering){const j=[],R=S.csp_provider.get_meta();R&&j.push(R),n.prerendering.cache&&j.push(`<meta http-equiv="cache-control" content="${n.prerendering.cache}">`),j.length>0&&(k=j.join(`
`)+k)}else{const j=S.csp_provider.get_header();j&&X.set("content-security-policy",j);const R=S.report_only_provider.get_header();R&&X.set("content-security-policy-report-only",R),y.size&&X.set("link",Array.from(y).join(", "))}k+=v.head;const Ae=r.templates.app({head:k,body:A,assets:g,nonce:S.nonce,env:De}),Se=await u.transformPageChunk({html:Ae,done:!0})||"";return Z||X.set("etag",`"${Bt(Se)}"`),Z?new Response(new ReadableStream({async start(j){j.enqueue(_e.encode(Se+`
`));for await(const R of Z)R.length&&j.enqueue(_e.encode(R));j.close()},type:"bytes"}),{headers:X}):U(Se,{status:a,headers:X})}class Qe{data;constructor(t){this.data=t}layouts(){return this.data.slice(0,-1)}page(){return this.data.at(-1)}validate(){for(const r of this.layouts())r&&(ur(r.server,r.server_id),dr(r.universal,r.universal_id));const t=this.page();t&&(fr(t.server,t.server_id),pr(t.universal,t.universal_id))}#e(t){return this.data.reduce((r,s)=>s?.universal?.[t]??s?.server?.[t]??r,void 0)}csr(){return this.#e("csr")??!0}ssr(){return this.#e("ssr")??!0}prerender(){return this.#e("prerender")??!1}trailing_slash(){return this.#e("trailingSlash")??"never"}get_config(){let t={};for(const r of this.data)!r?.universal?.config&&!r?.server?.config||(t={...t,...r?.universal?.config,...r?.server?.config});return Object.keys(t).length?t:void 0}should_prerender_data(){return this.data.some(t=>t?.server?.load||t?.server?.trailingSlash!==void 0)}}async function er({event:e,event_state:t,options:r,manifest:s,state:n,status:o,error:a,resolve_opts:l}){if(e.request.headers.get("x-sveltekit-error"))return ke(r,o,a.message);const i=[];try{const c=[],u=await s._.nodes[0](),d=new Qe([u]),m=d.ssr(),f=d.csr(),p=pe(e,t,r);if(m){n.error=!0;const h=Ye({event:e,event_state:t,state:n,node:u,parent:async()=>({})}),_=await h;p.add_node(0,_);const y=await Ft({event:e,event_state:t,fetched:i,node:u,parent:async()=>({}),resolve_opts:l,server_data_promise:h,state:n,csr:f});c.push({node:u,server_data:_,data:y},{node:await s._.nodes[1](),data:null,server_data:null})}return await he({options:r,manifest:s,state:n,page_config:{ssr:m,csr:f},status:o,error:await I(e,t,r,a),branch:c,fetched:i,event:e,event_state:t,resolve_opts:l,data_serializer:p})}catch(c){return c instanceof V?ve(c.status,c.location):ke(r,ie(c),(await I(e,t,r,c)).message)}}async function fs(e,t,r,s,n){return ee({name:"sveltekit.remote.call",attributes:{},fn:o=>{const a=ce(e,o);return N({event:a,state:t},()=>ps(a,t,r,s,n))}})}async function ps(e,t,r,s,n){const[o,a,l]=n.split("/"),i=s._.remotes;i[o]||je(404);const u=(await i[o]()).default[a];u||je(404);const d=u.__,m=r.hooks.transport;e.tracing.current.setAttributes({"sveltekit.remote.call.type":d.type,"sveltekit.remote.call.name":d.name});let f;try{if(d.type==="query_batch"){if(e.request.method!=="POST")throw new L(405,"Method Not Allowed",`\`query.batch\` functions must be invoked via POST request, not ${e.request.method}`);const{payloads:y}=await e.request.json(),$=y.map(x=>ge(x,m)),E=await N({event:e,state:t},()=>d.run($)),v=await Promise.all($.map(async(x,w)=>{try{return{type:"result",data:E(x,w)}}catch(g){return{type:"error",error:await I(e,t,r,g),status:g instanceof ae||g instanceof L?g.status:500}}}));return G({type:"result",result:ue(v,m)})}if(d.type==="form"){if(e.request.method!=="POST")throw new L(405,"Method Not Allowed",`\`form\` functions must be invoked via POST request, not ${e.request.method}`);if(!Ve(e.request))throw new L(415,"Unsupported Media Type",`\`form\` functions expect form-encoded data — received ${e.request.headers.get("content-type")}`);const y=await e.request.formData();f=JSON.parse(y.get("sveltekit:remote_refreshes")??"[]"),y.delete("sveltekit:remote_refreshes"),l&&y.set("sveltekit:id",decodeURIComponent(l));const $=d.fn,E=await N({event:e,state:t},()=>$(y));return G({type:"result",result:ue(E,m),refreshes:E.issues?{}:await p(f)})}if(d.type==="command"){const{payload:y,refreshes:$}=await e.request.json(),E=ge(y,m),v=await N({event:e,state:t},()=>u(E));return G({type:"result",result:ue(v,m),refreshes:await p($)})}const h=d.type==="prerender"?l:new URL(e.request.url).searchParams.get("payload"),_=await N({event:e,state:t},()=>u(ge(h,m)));return G({type:"result",result:ue(_,m)})}catch(h){if(h instanceof V)return G({type:"redirect",location:h.location,refreshes:await p(f??[])});const _=h instanceof ae||h instanceof L?h.status:500;return G({type:"error",error:await I(e,t,r,h),status:_},{status:t.prerendering?_:void 0,headers:{"cache-control":"private, no-store"}})}async function p(h){const _=t.refreshes??{};for(const y of h){if(_[y]!==void 0)continue;const[$,E,v]=y.split("/"),x=s._.remotes[$],w=(await x?.())?.default?.[E];w||je(400,"Bad Request"),_[y]=N({event:e,state:t},()=>w(ge(v,m)))}if(Object.keys(_).length!==0)return ue(Object.fromEntries(await Promise.all(Object.entries(_).map(async([y,$])=>[y,await $]))),m)}}async function hs(e,t,r,s){return ee({name:"sveltekit.remote.form.post",attributes:{},fn:n=>{const o=ce(e,n);return N({event:o,state:t},()=>_s(o,t,r,s))}})}async function _s(e,t,r,s){const[n,o,a]=s.split("/");let c=(await r._.remotes[n]?.())?.default[o];if(!c)return e.setHeaders({allow:"GET"}),{type:"error",error:new L(405,"Method Not Allowed","POST method not allowed. No form actions exist for this page")};a&&(c=N({event:e,state:t},()=>c.for(JSON.parse(a))));try{const u=await e.request.formData(),d=c.__.fn;return a&&!u.has("id")&&u.set("sveltekit:id",decodeURIComponent(a)),await N({event:e,state:t},()=>d(u)),{type:"success",status:200}}catch(u){const d=u;return d instanceof V?{type:"redirect",status:d.status,location:d.location}:{type:"error",error:Ke(d)}}}function ms(e){return e.pathname.startsWith(`${z}/${oe}/remote/`)&&e.pathname.replace(`${z}/${oe}/remote/`,"")}function ys(e){return e.searchParams.get("/remote")}const ws=10;async function gs(e,t,r,s,n,o,a,l){if(o.depth>ws)return U(`Not found: ${e.url.pathname}`,{status:404});if(Nt(e)){const i=await n._.nodes[r.leaf]();return Gr(e,t,s,i?.server)}try{const i=a.page();let c=200,u;if(Jr(e)){const g=ys(e.url);if(g?u=await hs(e,t,n,g):u=await Zr(e,t,i.server),u?.type==="redirect")return ve(u.status,u.location);u?.type==="error"&&(c=ie(u.error)),u?.type==="failure"&&(c=u.status)}const d=a.prerender();if(d){if(i.server?.actions)throw new Error("Cannot prerender pages with actions")}else if(o.prerendering)return new Response(void 0,{status:204});o.prerender_default=d;const m=a.should_prerender_data(),f=Ze(e.url.pathname),p=[],h=a.ssr(),_=a.csr();if(h===!1&&!(o.prerendering&&m))return re&&u&&e.request.headers.has("x-sveltekit-action"),await he({branch:[],fetched:p,page_config:{ssr:!1,csr:_},status:c,error:null,event:e,event_state:t,options:s,manifest:n,state:o,resolve_opts:l,data_serializer:pe(e,t,s)});const y=[];let $=null;const E=pe(e,t,s),v=o.prerendering&&m?Wt(e,t,s):null,x=a.data.map((g,b)=>{if($)throw $;return Promise.resolve().then(async()=>{try{if(g===i&&u?.type==="error")throw u.error;const k=await Ye({event:e,event_state:t,state:o,node:g,parent:async()=>{const A={};for(let S=0;S<b;S+=1){const T=await x[S];T&&Object.assign(A,T.data)}return A}});return g&&E.add_node(b,k),v?.add_node(b,k),k}catch(k){throw $=k,$}})}),w=a.data.map((g,b)=>{if($)throw $;return Promise.resolve().then(async()=>{try{return await Ft({event:e,event_state:t,fetched:p,node:g,parent:async()=>{const k={};for(let A=0;A<b;A+=1)Object.assign(k,await w[A]);return k},resolve_opts:l,server_data_promise:x[b],state:o,csr:_})}catch(k){throw $=k,$}})});for(const g of x)g.catch(()=>{});for(const g of w)g.catch(()=>{});for(let g=0;g<a.data.length;g+=1){const b=a.data[g];if(b)try{const k=await x[g],A=await w[g];y.push({node:b,server_data:k,data:A})}catch(k){const A=k;if(A instanceof V){if(o.prerendering&&m){const C=JSON.stringify({type:"redirect",location:A.location});o.prerendering.dependencies.set(f,{response:U(C),body:C})}return ve(A.status,A.location)}const S=ie(A),T=await I(e,t,s,A);for(;g--;)if(r.errors[g]){const C=r.errors[g],W=await n._.nodes[C]();let F=g;for(;!y[F];)F-=1;E.set_max_nodes(F+1);const Z=Le(y.slice(0,F+1)),X=new Qe(Z.map(Ae=>Ae.node));return await he({event:e,event_state:t,options:s,manifest:n,state:o,resolve_opts:l,page_config:{ssr:X.ssr(),csr:X.csr()},status:S,error:T,branch:Z.concat({node:W,data:null,server_data:null}),fetched:p,data_serializer:E})}return ke(s,S,T.message)}else y.push(null)}if(o.prerendering&&v){let{data:g,chunks:b}=v.get_data();if(b)for await(const k of b)g+=k;o.prerendering.dependencies.set(f,{response:U(g),body:g})}return await he({event:e,event_state:t,options:s,manifest:n,state:o,resolve_opts:l,page_config:{csr:_,ssr:h},status:c,error:null,branch:h===!1?[]:Le(y),action_result:u,fetched:p,data_serializer:h===!1?pe(e,t,s):E})}catch(i){return await er({event:e,event_state:t,options:s,manifest:n,state:o,status:500,error:i,resolve_opts:l})}}function bs(e){let t=!1,r;return()=>t?r:(t=!0,r=e())}async function $s(e,t,r,s,n,o,a,l){if(!r.page)return new Response(void 0,{status:404});try{const i=[...r.page.layouts,r.page.leaf],c=a??i.map(()=>!0);let u=!1;const d=new URL(e.url);d.pathname=Fe(d.pathname,l);const m={...e,url:d},f=i.map((v,x)=>bs(async()=>{try{if(u)return{type:"skip"};const w=v==null?v:await n._.nodes[v]();return Ye({event:m,event_state:t,state:o,node:w,parent:async()=>{const g={};for(let b=0;b<x;b+=1){const k=await f[b]();k&&Object.assign(g,k.data)}return g}})}catch(w){throw u=!0,w}})),p=f.map(async(v,x)=>c[x]?v():{type:"skip"});let h=p.length;const _=await Promise.all(p.map((v,x)=>v.catch(async w=>{if(w instanceof V)throw w;return h=Math.min(h,x+1),{type:"error",error:await I(e,t,s,w),status:w instanceof ae||w instanceof L?w.status:void 0}}))),y=Wt(e,t,s);for(let v=0;v<_.length;v++)y.add_node(v,_[v]);const{data:$,chunks:E}=y.get_data();return E?new Response(new ReadableStream({async start(v){v.enqueue(_e.encode($));for await(const x of E)v.enqueue(_e.encode(x));v.close()},type:"bytes"}),{headers:{"content-type":"text/sveltekit-data","cache-control":"private, no-store"}}):He($)}catch(i){const c=i;return c instanceof V?Me(c):He(await I(e,t,s,c),500)}}function He(e,t=200){return U(typeof e=="string"?e:JSON.stringify(e),{status:t,headers:{"content-type":"application/json","cache-control":"private, no-store"}})}function Me(e){return He({type:"redirect",location:e.location})}var be={};/*!
 * cookie
 * Copyright(c) 2012-2014 Roman Shtylman
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */var dt;function ks(){if(dt)return be;dt=1,be.parse=r,be.serialize=s;var e=Object.prototype.toString,t=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function r(i,c){if(typeof i!="string")throw new TypeError("argument str must be a string");for(var u={},d=c||{},m=d.decode||n,f=0;f<i.length;){var p=i.indexOf("=",f);if(p===-1)break;var h=i.indexOf(";",f);if(h===-1)h=i.length;else if(h<p){f=i.lastIndexOf(";",p-1)+1;continue}var _=i.slice(f,p).trim();if(u[_]===void 0){var y=i.slice(p+1,h).trim();y.charCodeAt(0)===34&&(y=y.slice(1,-1)),u[_]=l(y,m)}f=h+1}return u}function s(i,c,u){var d=u||{},m=d.encode||o;if(typeof m!="function")throw new TypeError("option encode is invalid");if(!t.test(i))throw new TypeError("argument name is invalid");var f=m(c);if(f&&!t.test(f))throw new TypeError("argument val is invalid");var p=i+"="+f;if(d.maxAge!=null){var h=d.maxAge-0;if(isNaN(h)||!isFinite(h))throw new TypeError("option maxAge is invalid");p+="; Max-Age="+Math.floor(h)}if(d.domain){if(!t.test(d.domain))throw new TypeError("option domain is invalid");p+="; Domain="+d.domain}if(d.path){if(!t.test(d.path))throw new TypeError("option path is invalid");p+="; Path="+d.path}if(d.expires){var _=d.expires;if(!a(_)||isNaN(_.valueOf()))throw new TypeError("option expires is invalid");p+="; Expires="+_.toUTCString()}if(d.httpOnly&&(p+="; HttpOnly"),d.secure&&(p+="; Secure"),d.partitioned&&(p+="; Partitioned"),d.priority){var y=typeof d.priority=="string"?d.priority.toLowerCase():d.priority;switch(y){case"low":p+="; Priority=Low";break;case"medium":p+="; Priority=Medium";break;case"high":p+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(d.sameSite){var $=typeof d.sameSite=="string"?d.sameSite.toLowerCase():d.sameSite;switch($){case!0:p+="; SameSite=Strict";break;case"lax":p+="; SameSite=Lax";break;case"strict":p+="; SameSite=Strict";break;case"none":p+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return p}function n(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function o(i){return encodeURIComponent(i)}function a(i){return e.call(i)==="[object Date]"||i instanceof Date}function l(i,c){try{return c(i)}catch{return i}}return be}var te=ks();const vs=/[\x00-\x1F\x7F()<>@,;:"/[\]?={} \t]/;function Ce(e){if(e?.path===void 0)throw new Error("You must specify a `path` when setting, deleting or serializing cookies")}function xs(e,t,r){return`${e||""}${t}?${encodeURIComponent(r)}`}function Es(e,t){const r=e.headers.get("cookie")??"",s=te.parse(r,{decode:m=>m});let n;const o=new Map,a={httpOnly:!0,sameSite:"lax",secure:!(t.hostname==="localhost"&&t.protocol==="http:")},l={get(m,f){const p=Array.from(o.values()).filter(y=>y.name===m&&qe(t.hostname,y.options.domain)&&Ue(t.pathname,y.options.path)).sort((y,$)=>$.options.path.length-y.options.path.length)[0];return p?p.options.maxAge===0?void 0:p.value:te.parse(r,{decode:f?.decode})[m]},getAll(m){const f=te.parse(r,{decode:m?.decode}),p=new Map;for(const h of o.values())if(qe(t.hostname,h.options.domain)&&Ue(t.pathname,h.options.path)){const _=p.get(h.name);(!_||h.options.path.length>_.options.path.length)&&p.set(h.name,h)}for(const h of p.values())f[h.name]=h.value;return Object.entries(f).map(([h,_])=>({name:h,value:_}))},set(m,f,p){const h=m.match(vs);h&&console.warn(`The cookie name "${m}" will be invalid in SvelteKit 3.0 as it contains ${h.join(" and ")}. See RFC 2616 for more details https://datatracker.ietf.org/doc/html/rfc2616#section-2.2`),Ce(p),u(m,f,{...a,...p})},delete(m,f){Ce(f),l.set(m,"",{...f,maxAge:0})},serialize(m,f,p){Ce(p);let h=p.path;if(!p.domain||p.domain===t.hostname){if(!n)throw new Error("Cannot serialize cookies until after the route is determined");h=nt(n,h)}return te.serialize(m,f,{...a,...p,path:h})}};function i(m,f){const p={...s};for(const h of o.values()){if(!qe(m.hostname,h.options.domain)||!Ue(m.pathname,h.options.path))continue;const _=h.options.encode||encodeURIComponent;p[h.name]=_(h.value)}if(f){const h=te.parse(f,{decode:_=>_});for(const _ in h)p[_]=h[_]}return Object.entries(p).map(([h,_])=>`${h}=${_}`).join("; ")}const c=[];function u(m,f,p){if(!n){c.push(()=>u(m,f,p));return}let h=p.path;(!p.domain||p.domain===t.hostname)&&(h=nt(n,h));const _=xs(p.domain,h,m),y={name:m,value:f,options:{...p,path:h}};o.set(_,y)}function d(m){n=Fe(t.pathname,m),c.forEach(f=>f())}return{cookies:l,new_cookies:o,get_cookie_header:i,set_internal:u,set_trailing_slash:d}}function qe(e,t){if(!t)return!0;const r=t[0]==="."?t.slice(1):t;return e===r?!0:e.endsWith("."+r)}function Ue(e,t){if(!t)return!0;const r=t.endsWith("/")?t.slice(0,-1):t;return e===r?!0:e.startsWith(r+"/")}function ft(e,t){for(const r of t){const{name:s,value:n,options:o}=r;if(e.append("set-cookie",te.serialize(s,n,o)),o.path.endsWith(".html")){const a=Ze(o.path);e.append("set-cookie",te.serialize(s,n,{...o,path:a}))}}}var ne={exports:{}},pt;function As(){if(pt)return ne.exports;pt=1;var e={decodeValues:!0,map:!1,silent:!1};function t(a){return typeof a=="string"&&!!a.trim()}function r(a,l){var i=a.split(";").filter(t),c=i.shift(),u=s(c),d=u.name,m=u.value;l=l?Object.assign({},e,l):e;try{m=l.decodeValues?decodeURIComponent(m):m}catch(p){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+m+"'. Set options.decodeValues to false to disable this feature.",p)}var f={name:d,value:m};return i.forEach(function(p){var h=p.split("="),_=h.shift().trimLeft().toLowerCase(),y=h.join("=");_==="expires"?f.expires=new Date(y):_==="max-age"?f.maxAge=parseInt(y,10):_==="secure"?f.secure=!0:_==="httponly"?f.httpOnly=!0:_==="samesite"?f.sameSite=y:_==="partitioned"?f.partitioned=!0:f[_]=y}),f}function s(a){var l="",i="",c=a.split("=");return c.length>1?(l=c.shift(),i=c.join("=")):i=a,{name:l,value:i}}function n(a,l){if(l=l?Object.assign({},e,l):e,!a)return l.map?{}:[];if(a.headers)if(typeof a.headers.getSetCookie=="function")a=a.headers.getSetCookie();else if(a.headers["set-cookie"])a=a.headers["set-cookie"];else{var i=a.headers[Object.keys(a.headers).find(function(u){return u.toLowerCase()==="set-cookie"})];!i&&a.headers.cookie&&!l.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),a=i}if(Array.isArray(a)||(a=[a]),l.map){var c={};return a.filter(t).reduce(function(u,d){var m=r(d,l);return u[m.name]=m,u},c)}else return a.filter(t).map(function(u){return r(u,l)})}function o(a){if(Array.isArray(a))return a;if(typeof a!="string")return[];var l=[],i=0,c,u,d,m,f;function p(){for(;i<a.length&&/\s/.test(a.charAt(i));)i+=1;return i<a.length}function h(){return u=a.charAt(i),u!=="="&&u!==";"&&u!==","}for(;i<a.length;){for(c=i,f=!1;p();)if(u=a.charAt(i),u===","){for(d=i,i+=1,p(),m=i;i<a.length&&h();)i+=1;i<a.length&&a.charAt(i)==="="?(f=!0,i=m,l.push(a.substring(c,d)),c=i):i=d+1}else i+=1;(!f||i>=a.length)&&l.push(a.substring(c,a.length))}return l}return ne.exports=n,ne.exports.parse=n,ne.exports.parseString=r,ne.exports.splitCookiesString=o,ne.exports}var ht=As();function Ss({event:e,options:t,manifest:r,state:s,get_cookie_header:n,set_internal:o}){const a=async(l,i)=>{const c=_t(l,i,e.url);let u=(l instanceof Request?l.mode:i?.mode)??"cors",d=(l instanceof Request?l.credentials:i?.credentials)??"same-origin";return t.hooks.handleFetch({event:e,request:c,fetch:async(m,f)=>{const p=_t(m,f,e.url),h=new URL(p.url);if(p.headers.has("origin")||p.headers.set("origin",e.url.origin),m!==c&&(u=(m instanceof Request?m.mode:f?.mode)??"cors",d=(m instanceof Request?m.credentials:f?.credentials)??"same-origin"),(p.method==="GET"||p.method==="HEAD")&&(u==="no-cors"&&h.origin!==e.url.origin||h.origin===e.url.origin)&&p.headers.delete("origin"),h.origin!==e.url.origin){if(`.${h.hostname}`.endsWith(`.${e.url.hostname}`)&&d!=="omit"){const b=n(h,p.headers.get("cookie"));b&&p.headers.set("cookie",b)}return fetch(p)}const _=J||z,y=decodeURIComponent(h.pathname),$=(y.startsWith(_)?y.slice(_.length):y).slice(1),E=`${$}/index.html`,v=r.assets.has($)||$ in r._.server_assets,x=r.assets.has(E)||E in r._.server_assets;if(v||x){const b=v?$:E;if(s.read){const k=v?r.mimeTypes[$.slice($.lastIndexOf("."))]:"text/html";return new Response(s.read(b),{headers:k?{"content-type":k}:{}})}else if(ot&&b in r._.server_assets){const k=r._.server_assets[b],A=r.mimeTypes[b.slice(b.lastIndexOf("."))];return new Response(ot(b),{headers:{"Content-Length":""+k,"Content-Type":A}})}return await fetch(p)}if(Ct(r,z+y))return await fetch(p);if(d!=="omit"){const b=n(h,p.headers.get("cookie"));b&&p.headers.set("cookie",b);const k=e.request.headers.get("authorization");k&&!p.headers.has("authorization")&&p.headers.set("authorization",k)}p.headers.has("accept")||p.headers.set("accept","*/*"),p.headers.has("accept-language")||p.headers.set("accept-language",e.request.headers.get("accept-language"));const w=await js(p,t,r,s),g=w.headers.get("set-cookie");if(g)for(const b of ht.splitCookiesString(g)){const{name:k,value:A,...S}=ht.parseString(b,{decodeValues:!1}),T=S.path??(h.pathname.split("/").slice(0,-1).join("/")||"/");o(k,A,{path:T,encode:C=>C,...S})}return w}})};return(l,i)=>{const c=a(l,i);return c.catch(()=>{}),c}}function _t(e,t,r){return e instanceof Request?e:new Request(typeof e=="string"?new URL(e,r):e,t)}async function js(e,t,r,s){if(e.signal){if(e.signal.aborted)throw new DOMException("The operation was aborted.","AbortError");let n=()=>{};const o=new Promise((l,i)=>{const c=()=>{i(new DOMException("The operation was aborted.","AbortError"))};e.signal.addEventListener("abort",c,{once:!0}),n=()=>e.signal.removeEventListener("abort",c)}),a=await Promise.race([We(e,t,r,{...s,depth:s.depth+1}),o]);return n(),a}else return await We(e,t,r,{...s,depth:s.depth+1})}let mt,ze,Ne;function Ts(e){return mt??=`export const env=${JSON.stringify(De)}`,ze??=`W/${Date.now()}`,Ne??=new Headers({"content-type":"application/javascript; charset=utf-8",etag:ze}),e.headers.get("if-none-match")===ze?new Response(void 0,{status:304,headers:Ne}):new Response(mt,{headers:Ne})}const yt=({html:e})=>e,wt=()=>!1,gt=({type:e})=>e==="js"||e==="css",Rs=new Set(["GET","HEAD","POST"]),Os=new Set(["GET","HEAD","OPTIONS"]);const We=qs(Ps);async function Ps(e,t,r,s){const n=new URL(e.url),o=Nr(n.pathname),a=Ur(n.pathname),l=ms(n);{const w=e.headers.get("origin");if(l){if(e.method!=="GET"&&w!==n.origin)return G({message:"Cross-site remote requests are forbidden"},{status:403})}else if(t.csrf_check_origin&&Ve(e)&&(e.method==="POST"||e.method==="PUT"||e.method==="PATCH"||e.method==="DELETE")&&w!==n.origin&&(!w||!t.csrf_trusted_origins.includes(w))){const b=`Cross-site ${e.method} form submissions are forbidden`,k={status:403};return e.headers.get("accept")==="application/json"?G({message:b},k):U(b,k)}}if(t.hash_routing&&n.pathname!==z+"/"&&n.pathname!=="/[fallback]")return U("Not found",{status:404});let i;o?n.pathname=Dr(n.pathname):a?(n.pathname=zr(n.pathname)+(n.searchParams.get(rt)==="1"?"/":"")||"/",n.searchParams.delete(rt),i=n.searchParams.get(st)?.split("").map(w=>w==="1"),n.searchParams.delete(st)):l&&(n.pathname=e.headers.get("x-sveltekit-pathname")??z,n.search=e.headers.get("x-sveltekit-search")??"");const c={},{cookies:u,new_cookies:d,get_cookie_header:m,set_internal:f,set_trailing_slash:p}=Es(e,n),h={prerendering:s.prerendering,transport:t.hooks.transport,handleValidationError:t.hooks.handleValidationError,tracing:{record_span:ee},is_in_remote_function:!1},_={cookies:u,fetch:null,getClientAddress:s.getClientAddress||(()=>{throw new Error("@sveltejs/adapter-auto does not specify getClientAddress. Please raise an issue")}),locals:{},params:{},platform:s.platform,request:e,route:{id:null},setHeaders:w=>{for(const g in w){const b=g.toLowerCase(),k=w[g];if(b==="set-cookie")throw new Error("Use `event.cookies.set(name, value, options)` instead of `event.setHeaders` to set cookies");if(b in c)throw new Error(`"${g}" header is already set`);c[b]=k,s.prerendering&&b==="cache-control"&&(s.prerendering.cache=k)}},url:n,isDataRequest:a,isSubRequest:s.depth>0,isRemoteRequest:!!l};_.fetch=Ss({event:_,options:t,manifest:r,state:s,get_cookie_header:m,set_internal:f}),s.emulator?.platform&&(_.platform=await s.emulator.platform({config:{},prerender:!!s.prerendering?.fallback}));let y=n.pathname;if(!l){const w=s.prerendering?.inside_reroute;try{s.prerendering&&(s.prerendering.inside_reroute=!0),y=await t.hooks.reroute({url:new URL(n),fetch:_.fetch})??n.pathname}catch{return U("Internal Server Error",{status:500})}finally{s.prerendering&&(s.prerendering.inside_reroute=w)}}try{y=hr(y)}catch{return U("Malformed URI",{status:400})}if(y!==n.pathname&&!s.prerendering?.fallback&&Ct(r,y)){const w=new URL(e.url);w.pathname=a?Ze(y):o?Ut(y):y;const g=await fetch(w,e),b=new Headers(g.headers);return b.has("content-encoding")&&(b.delete("content-encoding"),b.delete("content-length")),new Response(g.body,{headers:b,status:g.status,statusText:g.statusText})}let $=null;if(z&&!s.prerendering?.fallback){if(!y.startsWith(z))return U("Not found",{status:404});y=y.slice(z.length)||"/"}if(o)return ls(y,new URL(e.url),r);if(y===`/${oe}/env.js`)return Ts(e);if(!l&&y.startsWith(`/${oe}`)){const w=new Headers;return w.set("cache-control","public, max-age=0, must-revalidate"),U("Not found",{status:404,headers:w})}if(!s.prerendering?.fallback){const w=await r._.matchers();for(const g of r._.routes){const b=g.pattern.exec(y);if(!b)continue;const k=Xt(b,g.params,w);if(k){$=g,_.route={id:$.id},_.params=vt(k);break}}}let E={transformPageChunk:yt,filterSerializedResponseHeaders:wt,preload:gt},v="never";try{const w=$?.page?new Qe(await Cs($.page,r)):void 0;if($&&!l){if(n.pathname===z||n.pathname===z+"/"?v="always":w?v=w.trailing_slash():$.endpoint&&(v=(await $.endpoint()).trailingSlash??"never"),!a){const b=Fe(n.pathname,v);if(b!==n.pathname&&!s.prerendering?.fallback)return new Response(void 0,{status:308,headers:{"x-sveltekit-normalize":"1",location:(b.startsWith("//")?n.origin+b:b)+(n.search==="?"?"":n.search)}})}if(s.before_handle||s.emulator?.platform){let b={},k=!1;if($.endpoint){const A=await $.endpoint();b=A.config??b,k=A.prerender??k}else w&&(b=w.get_config()??b,k=w.prerender());s.before_handle&&s.before_handle(_,b,k),s.emulator?.platform&&(_.platform=await s.emulator.platform({config:b,prerender:k}))}}p(v),s.prerendering&&!s.prerendering.fallback&&!s.prerendering.inside_reroute&&kt(n);const g=await ee({name:"sveltekit.handle.root",attributes:{"http.route":_.route.id||"unknown","http.method":_.request.method,"http.url":_.url.href,"sveltekit.is_data_request":a,"sveltekit.is_sub_request":_.isSubRequest},fn:async b=>{const k={..._,tracing:{enabled:!1,root:b,current:b}};return await N({event:k,state:h},()=>t.hooks.handle({event:k,resolve:(A,S)=>ee({name:"sveltekit.resolve",attributes:{"http.route":A.route.id||"unknown"},fn:T=>N(null,()=>x(ce(A,T),w,S).then(C=>{for(const W in c){const F=c[W];C.headers.set(W,F)}return ft(C.headers,d.values()),s.prerendering&&A.route.id!==null&&C.headers.set("x-sveltekit-routeid",encodeURI(A.route.id)),T.setAttributes({"http.response.status_code":C.status,"http.response.body.size":C.headers.get("content-length")||"unknown"}),C}))})}))}});if(g.status===200&&g.headers.has("etag")){let b=e.headers.get("if-none-match");b?.startsWith('W/"')&&(b=b.substring(2));const k=g.headers.get("etag");if(b===k){const A=new Headers({etag:k});for(const S of["cache-control","content-location","date","expires","vary","set-cookie"]){const T=g.headers.get(S);T&&A.set(S,T)}return new Response(void 0,{status:304,headers:A})}}if(a&&g.status>=300&&g.status<=308){const b=g.headers.get("location");if(b)return Me(new V(g.status,b))}return g}catch(w){if(w instanceof V){const g=a||l?Me(w):$?.page&&Nt(_)?Dt(w):ve(w.status,w.location);return ft(g.headers,d.values()),g}return await it(_,h,t,w)}async function x(w,g,b){try{if(b&&(E={transformPageChunk:b.transformPageChunk||yt,filterSerializedResponseHeaders:b.filterSerializedResponseHeaders||wt,preload:b.preload||gt}),t.hash_routing||s.prerendering?.fallback)return await he({event:w,event_state:h,options:t,manifest:r,state:s,page_config:{ssr:!1,csr:!0},status:200,error:null,branch:[],fetched:[],resolve_opts:E,data_serializer:pe(w,h,t)});if(l)return await fs(w,h,t,r,l);if($){const A=w.request.method;let S;if(a)S=await $s(w,h,$,t,r,s,i,v);else if($.endpoint&&(!$.page||qr(w)))S=await Cr(w,h,await $.endpoint(),s);else if($.page)if(g)if(Rs.has(A))S=await gs(w,h,$.page,t,r,s,g,E);else{const T=new Set(Os);if((await r._.nodes[$.page.leaf]())?.server?.actions&&T.add("POST"),A==="OPTIONS")S=new Response(null,{status:204,headers:{allow:Array.from(T.values()).join(", ")}});else{const W=[...T].reduce((F,Z)=>(F[Z]=!0,F),{});S=Tt(W,A)}}else throw new Error("page_nodes not found. This should never happen");else throw new Error("Route is neither page nor endpoint. This should never happen");if(e.method==="GET"&&$.page&&$.endpoint){const T=S.headers.get("vary")?.split(",")?.map(C=>C.trim().toLowerCase());T?.includes("accept")||T?.includes("*")||(S=new Response(S.body,{status:S.status,statusText:S.statusText,headers:new Headers(S.headers)}),S.headers.append("Vary","Accept"))}return S}if(s.error&&w.isSubRequest){const A=new Headers(e.headers);return A.set("x-sveltekit-error","true"),await fetch(e,{headers:A})}if(s.error)return U("Internal Server Error",{status:500});if(s.depth===0)return re&&w.url.pathname,await er({event:w,event_state:h,options:t,manifest:r,state:s,status:404,error:new L(404,"Not Found",`Not found: ${w.url.pathname}`),resolve_opts:E});if(s.prerendering)return U("not found",{status:404});const k=await fetch(e);return new Response(k.body,k)}catch(k){return await it(w,h,t,k)}finally{w.cookies.set=()=>{throw new Error("Cannot use `cookies.set(...)` after the response has been generated")},w.setHeaders=()=>{throw new Error("Cannot use `setHeaders(...)` after the response has been generated")}}}}function Cs(e,t){return Promise.all([...e.layouts.map(r=>r==null?r:t._.nodes[r]()),t._.nodes[e.leaf]()])}function qs(e){return async(t,...r)=>e(t,...r)}function bt(e,t,r){return Object.fromEntries(Object.entries(e).filter(([s])=>s.startsWith(t)&&(r===""||!s.startsWith(r))))}let Us,$t=null;class Js{#e;#t;constructor(t){if(this.#e=yr,this.#t=t,vr){const r=this.respond.bind(this);this.respond=async(...s)=>{const{promise:n,resolve:o}=xt(),a=$t;return $t=n,await a,r(...s).finally(o)}}}async init({env:t,read:r}){const{env_public_prefix:s,env_private_prefix:n}=this.#e;wr(bt(t,n,s)),gr(bt(t,s,n)),r&&$r(a=>{const l=r(a);return l instanceof ReadableStream?l:new ReadableStream({async start(i){try{const c=await Promise.resolve(l);if(!c){i.close();return}const u=c.getReader();for(;;){const{done:d,value:m}=await u.read();if(d)break;i.enqueue(m)}i.close()}catch(c){i.error(c)}}})}),await(Us??=(async()=>{try{const o=await br();this.#e.hooks={handle:o.handle||(({event:a,resolve:l})=>l(a)),handleError:o.handleError||(({status:a,error:l,event:i})=>{const c=Pr(a,l,i);console.error(c)}),handleFetch:o.handleFetch||(({request:a,fetch:l})=>l(a)),handleValidationError:o.handleValidationError||(({issues:a})=>(console.error("Remote function schema validation failed:",a),{message:"Bad Request"})),reroute:o.reroute||(()=>{}),transport:o.transport||{}},o.transport&&Object.fromEntries(Object.entries(o.transport).map(([a,l])=>[a,l.decode])),o.init&&await o.init()}catch(o){throw o}})())}async respond(t,r){return We(t,this.#e,this.#t,{...r,error:!1,depth:0})}}export{Js as Server};
